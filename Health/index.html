<!DOCTYPE html>

    <html>

        <head>
            
            <meta name="description" content="ARI Exploration">
            <meta charset="utf-8">
            <meta name="viewport" content="width=device-width">
             
            <title>ARI</title>
            
            <meta name="viewport" content="width=device-width, initial-scale=1">
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

            <!--Add Leaflet CSS-->
            <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css" />
            <script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"></script>
            <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
            integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
            crossorigin=""></script>
            
            <!--Load in Heat plugin -->
            <script src="https://leaflet.github.io/Leaflet.heat/dist/leaflet-heat.js"></script>
            <script src="https://code.jquery.com/jquery-3.1.0.js"></script>  
            
            <!--KVS geoJSON-->    
            <script src="BurlingtonCountCapitaDistanceSAI.geojson"></script>
            <script src="CedarRapidsCountCapitaDistanceSAI.geojson"></script>
            <script src="IowaCitySAIChlor.geojson"></script>
            <script src="StateOutlets.geojson"></script>
            <script src="BurlingtonSAI"></script>
            <script src ="MarshalltownSAI"></script>
            <script src = "PublicSchools"></script>
            <script src = "PrivateSchools"></script>
            <script src = "AlcRelatedCrashes"></script>
            <script src= "StateOffOutlets_2019"></script>
            <script src = "StateOnOutlets_2019"></script>
            <script src = "schools"></script>

             <!--Boot Strap-->
             <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
             <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css">

      
            <!--External CSS for Markers -->
            <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css">	
            <link rel="stylesheet" href="https://profseeger.github.io/LVM-Code/classes/Leaflet.awesome-markers/leaflet.awesome-markers.css">
            <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
            <link rel="stylesheet" href="https://code.ionicframework.com/ionicons/1.5.2/css/ionicons.min.css">
            <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css" />


            <!--External JS for Markers-->	
            <script src="https://code.jquery.com/jquery-3.1.0.js"></script>
            <script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"></script>
            <script src="https://profseeger.github.io/LVM-Code/classes/Leaflet.awesome-markers/leaflet.awesome-markers.js"></script>



             <div class="navbar">
                <a href="https://kvanselous.github.io/ARIDashboard/">Home</a>
                <a href="https://kvanselous.github.io/ARIDashboard/Sales/">Sales</a>
                <a href="https://publicsciencecollaborative.shinyapps.io/abd_tobacco/">Tobacco</a>
                <a href="https://kvanselous.github.io/ARIDashboard/Violations/">Violations</a>
                <a href="https://kvanselous.github.io/ARIDashboard/Health/">Health & Safety</a>
                <a href="https://kvanselous.github.io/ARIDashboard/Deliverables/">Deliverable List</a>
            </div>
              

                <style>
 
                    h1 {text-align: center; font-size: 50px}
                    h2 {text-align: center; margin-left: 10px}
                    h3 {text-align: center; margin-left: 10px}
                    h4 {margin-left: 10px}
                    h5 {margin-left: 10px}

                    .center {
                    display: block;
                    margin-left: auto;
                    margin-right: auto;
                    width: 25%;
                    } 
                   
                    #map1container {border: 1px solid#0a0a0a;  position:absolute; background-color:#ecf7fc; color:black; text-align:left; margin-right: 0px; margin-left:5px; width:600px; height:700px;padding 0; }
                    #map1 {border: 1px solid#0a0a0a;  position: relative; width:1000px; height:700px; margin-left:600px;border-left:2px; padding 0; overflow:hidden;}
                    #map2container {border: 1px solid#0a0a0a; position:absolute; background-color:#fdfdfd; color:black; text-align:left; margin-right: 0px; margin-left:5px; width:600px; height:700px;padding 0; }
                    #map2 {border: 1px solid#0a0a0a; position: relative; width:1000px; height:700px; margin-left:600px;border-left:2px; padding 0; overflow:hidden;} 
                    #map3container {border: 1px solid#0a0a0a; position:absolute; background-color:#ecf7fc; color:black; text-align:left; margin-right: 0px; margin-left:5px; width:600px; height:700px;padding 0; }
                    #map3 {border: 1px solid#0a0a0a; position: relative; width:1000px; height:700px; margin-left:600px;border-left:2px; padding 0; overflow:hidden;}
                    #map4container {border: 1px solid#0a0a0a; position:absolute; background-color:#fdfdfd; color:black; text-align:left; margin-right: 0px; margin-left:5px; width:600px; height:700px;padding 0; }
                    #map4 {border: 1px solid#0a0a0a; position: relative; width:1000px; height:700px; margin-left:600px;border-left:2px; padding 0; overflow:hidden;}         


                    /* The navigation bar */
                    .navbar {
                    overflow: hidden;
                    background-color: #333;
                    position: relative; /* Set the navbar to fixed position */
                    top: 0; /* Position the navbar at the top of the page */
                    width: 100%; /* Full width */
                    }

                    /* Links inside the navbar */
                    .navbar a {
                    float: left;
                    display: block;
                    color: #f2f2f2;
                    text-align: center;
                    padding: 14px 16px;
                    text-decoration: none;
                    }

                    /* Change background on mouse-over */
                    .navbar a:hover {
                    background: #ddd;
                    color: black;
                    }

                    /* Main content */
                    .main {
                    margin-top: 30px; /* Add a top margin to avoid content overlay */
                    }

                     /* Legend */
                    .legend {
                        line-height: 18px;
                        color: #555;
                        background color:cornsilk
                        }
                    .legend i {
                        width: 20px;
                        height: 20px;
                        float: left;
                        margin-right: 8px;
                        opacity: 0.7;
                        }
                    .info {
                        padding: 6px 8px;
                        font: 20px/20px Arial, Helvetica, sans-serif;
                        background: white;
                        background: rgba(255,255,255,0.8);
                        box-shadow: 0 0 15px rgba(0,0,0,0.2);
                        border-radius: 5px;
                        }
                    .info h4 {
                        margin: 0 0 5px;
                        color: #777;
                        }
                        
                
                </style>
        
        </head>

    <body>   
           
        <!--Title-->
     
             
        <img src="ARI.jpg" height=55% width=55% >
        <img src="logonew.jpg" height=35% width=35% class="top-left" >
        
      
        <!--Headings and Maps-->
        <h3>Deliverable 7: Create choropleth maps that project spatial variation in health and safety data throughout Iowa. Linking these data with the data described in items 1-6 above, create layered maps that combine point-level data (e.g. the locations of compliance violations) with choropleth data that enable the spatial analysis of patterns of association between health and safety variables and liquor and tobacco data, including the identification of ‘hot spots’</h3>
        <h2>Alcohol Outlets & Call for Service </h2>   
        <div id='map1container'>
            <h2>Cedar Rapids Outlets </h2>   
            <h4><b>Background:</b> Alcohol Outlet Density </h4>
            <h4><b>Map:</b> The map to the right displays.   </h4>
            <h4><b>Interactivity:</b> Click on.  </h4>     
            <br><img src = "DensityLegend.png" height=75% width=100% class="right" >     

            </div>
            
        <div id='map1' class="center">
        </div>
        <div id='map2container'>
            <h2>Iowa City Outlets </h2>   
            <h4><b>Background:</b> Alcohol Outlet Density</h4>  
            <h4><b>Map:</b> The map to the right displays.  </h4>
            <h4><b>Interactivity:</b> Click on.</h4>            
            </div>
        <div id='map2' class="center">
        </div>
       
        <div id='map3container'>
            <h2>Marshalltown Outlets </h2>   
            <h4><b>Background:</b> Alcohol Outlet Density</p>  
            <h4><b>Map:</b> The map to the right displays.  </h4>
            <h4><b>Interactivity:</b> Click on.</h4>            
            </div>
        <div id='map3' class="center"></div>
    

        <div id='map4container'>
        <h2>Burlington Outlets </h2>   
        <h4><b>Background:</b> Alcohol Outlet Density</h4>  
        <h4><b>Map:</b> The map to the right displays.  </h4>
        <h4><b>Interactivity:</b> Click on.</h4>            
        </div>
        <div id='map4' class="center"></div>

            <script>   
                         
                    //Cedar Rapids Maps, Marker Information, Layers, & Layer Control
                    var map1 = L.map('map1').setView([41.97, -91.6656], 11.5);
                        L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
                        attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
                        maxZoom: 18,
                        id: 'mapbox/streets-v11',
                        accessToken: 'pk.eyJ1Ijoia3ZhbnNlbG91cyIsImEiOiJjazZsbHE2NGwwZDdtM2tvNmRjc2N0NHo5In0.h_W_-4R3haPMK-IDBTcL-w' 
                        }).addTo(map1);      
                    
                    var circle1 = {
                        radius: 3,
                        fillColor: "grey",
                        color: "black",
                        weight: 1,
                        opacity: 1,
                        fillOpacity: 0.8
                        };   

                    var circle2 = {
                        radius: 2,
                        fillColor: "#ff8c00",
                        color: "#ff8c00",
                        weight: 1,
                        opacity: 1,
                        fillOpacity: 0.8
                        };   
                    
                    
                    var circle3 = {
                        radius: 2,
                        fillColor: "#8b0000",
                        color: "##8b0000",
                        weight: 1,
                        opacity: 1,
                        fillOpacity: 0.8
                        };   


                    var osmc1 = L.tileLayer('https://{s}.tile.osm.org/{z}/{x}/{y}.png', {
                        attribution: '&copy; <a href="https://osm.org/copyright">OpenStreetMap</a> contributors',
                        maxZoom: 18
                        }).addTo(map1);
                
                var nineteen= L.geoJSON(outlets, { 
                            filter: function(feature, layer) {
                                return feature.properties.sixmosactiveyear == "2019";
                            },
                            pointToLayer: function(feature, coordinates) {
                            return L.circleMarker(coordinates,circle1);
                            },
                            onEachFeature: function (feature, layer) {
                            popupOptions = {maxWidth: 200}; 
                            layer.bindPopup("<br><b> Name: </b>" + feature.properties.doing_business_as +
                            "<br> <b>Address: </b>" + feature.properties.address +  
                            "<br><b>Year: </b>" + feature.properties.sixmosactiveyear +
                            "<br><b>Number Of Licenses: </b>" + feature.properties.numlics 
                             )}, style: function(feature) {
                              switch (feature.properties.onpremisePSC) {
                                 case 1: return {color: "#ff0000"};
                            }
                            switch (feature.properties.offpremisePSC) {
                                 case 1: return {color: "#0000ff"};
                            }
                            }
                        }).addTo(map1);
                
                var eighteen= L.geoJSON(outlets, { 
                            filter: function(feature, layer) {
                                return feature.properties.sixmosactiveyear == "2018";
                            },
                            pointToLayer: function(feature, coordinates) {
                            return L.circleMarker(coordinates,circle1);
                            },
                            onEachFeature: function (feature, layer) {
                            popupOptions = {maxWidth: 200}; 
                            layer.bindPopup("<br><b> Name: </b>" + feature.properties.doing_business_as +
                            "<br> <b>Address: </b>" + feature.properties.address +  
                            "<br><b>Year: </b>" + feature.properties.sixmosactiveyear +
                            "<br><b>Number Of Licenses: </b>" + feature.properties.numlics   
                            )}, style: function(feature) {
                              switch (feature.properties.onpremisePSC) {
                                 case 1: return {color: "#ff0000"};
                            }
                            switch (feature.properties.offpremisePSC) {
                                 case 1: return {color: "#0000ff"};
                            }
                            }
                        }).addTo(map1);

                var seventeen=  L.geoJSON(outlets, { 
                            filter: function(feature, layer) {
                                return feature.properties.sixmosactiveyear == "2017";
                            },
                            pointToLayer: function(feature, coordinates) {
                            return L.circleMarker(coordinates,circle1);
                            },
                            onEachFeature: function (feature, layer) {
                            popupOptions = {maxWidth: 200}; 
                            layer.bindPopup("<br><b> Name: </b>" + feature.properties.doing_business_as +
                            "<br> <b>Address: </b>" + feature.properties.address +  
                            "<br><b>Year: </b>" + feature.properties.sixmosactiveyear +
                            "<br><b>Number Of Licenses: </b>" + feature.properties.numlics   
                            )}, style: function(feature) {
                              switch (feature.properties.onpremisePSC) {
                                 case 1: return {color: "#ff0000"};
                            }
                            switch (feature.properties.offpremisePSC) {
                                 case 1: return {color: "#0000ff"};
                            }
                            }
                        }).addTo(map1);
                     
                var sixteen=  L.geoJSON(outlets, { 
                            filter: function(feature, layer) {
                                return feature.properties.sixmosactiveyear == "2016";
                            },
                            pointToLayer: function(feature, coordinates) {
                            return L.circleMarker(coordinates,circle1);
                            },
                            onEachFeature: function (feature, layer) {
                            popupOptions = {maxWidth: 200}; 
                            layer.bindPopup("<br><b> Name: </b>" + feature.properties.doing_business_as +
                            "<br> <b>Address: </b>" + feature.properties.address +  
                            "<br><b>Year: </b>" + feature.properties.sixmosactiveyear +
                            "<br><b>Number Of Licenses: </b>" + feature.properties.numlics   
                            )}, style: function(feature) {
                              switch (feature.properties.onpremisePSC) {
                                 case 1: return {color: "#ff0000"};
                            }
                            switch (feature.properties.offpremisePSC) {
                                 case 1: return {color: "#0000ff"};
                            }
                            }
                        }).addTo(map1);
                
                 var fifteen=  L.geoJSON(outlets, { 
                            filter: function(feature, layer) {
                                return feature.properties.sixmosactiveyear == "2015";
                            },
                            pointToLayer: function(feature, coordinates) {
                            return L.circleMarker(coordinates,circle1);
                            },
                            onEachFeature: function (feature, layer) {
                            popupOptions = {maxWidth: 200}; 
                            layer.bindPopup("<br><b> Name: </b>" + feature.properties.doing_business_as +
                            "<br> <b>Address: </b>" + feature.properties.address +  
                            "<br><b>Year: </b>" + feature.properties.sixmosactiveyear +
                            "<br><b>Number Of Licenses: </b>" + feature.properties.numlics   
                            )}, style: function(feature) {
                              switch (feature.properties.onpremisePSC) {
                                 case 1: return {color: "#ff0000"};
                            }
                            switch (feature.properties.offpremisePSC) {
                                 case 1: return {color: "#0000ff"};
                            }
                            }
                        }).addTo(map1);

                 var fourteen =  L.geoJSON(outlets, { 
                            filter: function(feature, layer) {
                                return feature.properties.sixmosactiveyear == "2014";
                            },
                            pointToLayer: function(feature, coordinates) {
                            return L.circleMarker(coordinates,circle1);
                            },
                            onEachFeature: function (feature, layer) {
                            popupOptions = {maxWidth: 200}; 
                            layer.bindPopup("<br><b> Name: </b>" + feature.properties.doing_business_as +
                            "<br> <b>Address: </b>" + feature.properties.address +  
                            "<br><b>Year: </b>" + feature.properties.sixmosactiveyear +
                            "<br><b>NumberOfLicenses: </b>" + feature.properties.numlics   
                            )}, style: function(feature) {
                              switch (feature.properties.onpremisePSC) {
                                 case 1: return {color: "#ff0000"};
                            }
                            switch (feature.properties.offpremisePSC) {
                                 case 1: return {color: "#0000ff"};
                            }
                            }
                        }).addTo(map1);

                var thirteen=  L.geoJSON(outlets, { 
                            filter: function(feature, layer) {
                                return feature.properties.sixmosactiveyear == "2013";
                            },
                            pointToLayer: function(feature, coordinates) {
                            return L.circleMarker(coordinates,circle1);
                            },
                            onEachFeature: function (feature, layer) {
                            popupOptions = {maxWidth: 200}; 
                            layer.bindPopup("<br><b> Name: </b>" + feature.properties.doing_business_as +
                            "<br> <b>Address: </b>" + feature.properties.address +  
                            "<br><b>Year: </b>" + feature.properties.sixmosactiveyear +
                            "<br><b>Number Of Licenses: </b>" + feature.properties.numlics   
                            )}, style: function(feature) {
                              switch (feature.properties.onpremisePSC) {
                                 case 1: return {color: "#ff0000"};
                            }
                            switch (feature.properties.offpremisePSC) {
                                 case 1: return {color: "#0000ff"};
                            }
                            }
                        }).addTo(map1);
                
                var twelve=  L.geoJSON(outlets, { 
                            filter: function(feature, layer) {
                                return feature.properties.sixmosactiveyear == "2012";
                            },
                            pointToLayer: function(feature, coordinates) {
                            return L.circleMarker(coordinates,circle1);
                            },
                            onEachFeature: function (feature, layer) {
                            popupOptions = {maxWidth: 200}; 
                            layer.bindPopup("<br><b> Name: </b>" + feature.properties.doing_business_as +
                            "<br> <b>Address: </b>" + feature.properties.address +  
                            "<br><b>Year: </b>" + feature.properties.sixmosactiveyear +
                            "<br><b>Number Of Licenses: </b>" + feature.properties.numlics   
                            )}, style: function(feature) {
                              switch (feature.properties.onpremisePSC) {
                                 case 1: return {color: "#ff0000"};
                            }
                            switch (feature.properties.offpremisePSC) {
                                 case 1: return {color: "#0000ff"};
                            }
                            }
                        }).addTo(map1);
                
                var eleven=  L.geoJSON(outlets, { 
                            filter: function(feature, layer) {
                                return feature.properties.sixmosactiveyear == "2011";
                            },
                            pointToLayer: function(feature, coordinates) {
                            return L.circleMarker(coordinates,circle1);
                            },
                            onEachFeature: function (feature, layer) {
                            popupOptions = {maxWidth: 200}; 
                            layer.bindPopup("<br><b> Name: </b>" + feature.properties.doing_business_as +
                            "<br> <b>Address: </b>" + feature.properties.address +  
                            "<br><b>Year: </b>" + feature.properties.sixmosactiveyear +
                            "<br><b>NumberOfLicenses: </b>" + feature.properties.numlics   
                            )}, style: function(feature) {
                              switch (feature.properties.onpremisePSC) {
                                 case 1: return {color: "#ff0000"};
                            }
                            switch (feature.properties.offpremisePSC) {
                                 case 1: return {color: "#0000ff"};
                            }
                            }
                        }).addTo(map1);

                var ten=  L.geoJSON(outlets, { 
                            filter: function(feature, layer) {
                                return feature.properties.sixmosactiveyear == "2010";
                            },
                            pointToLayer: function(feature, coordinates) {
                            return L.circleMarker(coordinates,circle1);
                            },
                            onEachFeature: function (feature, layer) {
                            popupOptions = {maxWidth: 200}; 
                            layer.bindPopup("<br><b> Name: </b>" + feature.properties.doing_business_as +
                            "<br> <b>Address: </b>" + feature.properties.address +  
                            "<br><b>Year: </b>" + feature.properties.sixmosactiveyear +
                            "<br><b>NumberOfLicenses: </b>" + feature.properties.numlics  
                            )}, style: function(feature) {
                              switch (feature.properties.onpremisePSC) {
                                 case 1: return {color: "#ff0000"};
                            }
                            switch (feature.properties.offpremisePSC) {
                                 case 1: return {color: "#0000ff"};
                            }
                            }
                        }).addTo(map1);

                var nine =  L.geoJSON(outlets, { 
                            filter: function(feature, layer) {
                                return feature.properties.sixmosactiveyear == "2009";
                            },
                            pointToLayer: function(feature, coordinates) {
                            return L.circleMarker(coordinates,circle1);
                            },
                            onEachFeature: function (feature, layer) {
                            popupOptions = {maxWidth: 200}; 
                            layer.bindPopup("<br><b> Name: </b>" + feature.properties.doing_business_as +
                            "<br> <b>Address: </b>" + feature.properties.address +  
                            "<br><b>Year: </b>" + feature.properties.sixmosactiveyear +
                            "<br><b>Number Of Licenses: </b>" + feature.properties.numlics   
                            )}, style: function(feature) {
                              switch (feature.properties.onpremisePSC) {
                                 case 1: return {color: "#ff0000"};
                            }
                            switch (feature.properties.offpremisePSC) {
                                 case 1: return {color: "#0000ff"};
                            }
                            }
                        }).addTo(map1);

                    var eight=  L.geoJSON(outlets, { 
                            filter: function(feature, layer) {
                                return feature.properties.sixmosactiveyear == "2008";
                            },
                            pointToLayer: function(feature, coordinates) {
                            return L.circleMarker(coordinates,circle1);
                            },
                            onEachFeature: function (feature, layer) {
                            popupOptions = {maxWidth: 200}; 
                            layer.bindPopup("<br><b> Name: </b>" + feature.properties.doing_business_as +
                            "<br> <b>Address: </b>" + feature.properties.address +  
                            "<br><b>Year: </b>" + feature.properties.sixmosactiveyear +
                            "<br><b>Number Of Licenses: </b>" + feature.properties.numlics   
                            )}, style: function(feature) {
                              switch (feature.properties.onpremisePSC) {
                                 case 1: return {color: "#ff0000"};
                            }
                            switch (feature.properties.offpremisePSC) {
                                 case 1: return {color: "#0000ff"};
                            }
                            }
                        }).addTo(map1);


                    var schools = L.geoJSON(schools,  { 
                            filter: function(feature, layer) {
                                return feature.properties.feature_cl == "School";
                            },
                            pointToLayer: function(feature, coordinates) {
                            return L.marker(coordinates, {
		                        icon: L.AwesomeMarkers.icon({
			                    icon: 'flag', 
			                    prefix: 'fa', 
			                    markerColor: 'blue',
			                    iconColor: 'yellow'
		                        })
                            });
                        },
                            onEachFeature: function (feature, layer) {
                            popupOptions = {maxWidth: 200}; 
                            layer.bindPopup("<br><b> Name: </b>" + feature.properties.feature_na)
                            },
                            } 
                            );

                    var crashes = L.geoJSON(crashes,  { 
                            filter: function(feature, layer) {
                                return feature.type == "Feature";
                            },
                            pointToLayer: function(feature, coordinates) {
                            return L.marker(coordinates, {
		                        icon: L.AwesomeMarkers.icon({
			                    icon: 'flag', 
			                    prefix: 'fa', 
			                    markerColor: 'red',
			                    iconColor: 'yellow'
		                        })
                            });
                        },
                            onEachFeature: function (feature, layer) {
                            popupOptions = {maxWidth: 200}; 
                            layer.bindPopup("<br><b> Severity: </b>" + feature.properties.CSEVERITY )
                            },
                            } 
                            );

                    function getColorc1(d) {
                            return d > 19.738366  ? '#FFFF0080' :
                                d > 13.75994  ? '#32CD3280' :
                                d > 9.988469   ? '#00808080' :
                                d > 7.384746   ? '#00008B80' :
                                d > 0   ? '#3F00FF80' :
                                            '#white';
                                            }


                    function stylec1(feature) {
                            return {
                                fillColor: getColorc1((feature.properties.SAIoutlet_miles)),
                                weight: 2,
                                opacity: 1,
                                color: 'black',
                                fillOpacity: 0.7
                            };
                        }


                    var CSAI = L.geoJson(ced, {style: stylec1});

                var basemapC1 = {
                    "Open Street Map" : osmc1,
                };

                    var overlayMapsC1 = {
                        "2019 Outlets": nineteen,
                        "2018 Outlets": eighteen,
                        "2017 Outlets": seventeen,
                        "2016 Outlets": sixteen,
                        "2015 Outlets": fifteen,
                        "2014 Outlets": fourteen,
                        "2013 Outlets": thirteen,
                        "2012 Outlets": twelve,
                        "2011 Outlets": eleven,
                        "2010 Outlets": ten,
                        "2009 Outlets": nine,
                        "2008 Outlets": eight,
                        "Schools": schools, 
                        "Alchol Related Crashes": crashes,
                        "Alcohol Outlet Density by Census Block in 2019": CSAI
                        };			

                    L.control.layers(basemapC1, overlayMapsC1).addTo(map1);	

                //Iowa city Maps
                var map2 = L.map('map2').setView([41.6611, -91.5302], 12);
                        L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
                        attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
                        maxZoom: 18,
                        id: 'mapbox/streets-v11',
                        accessToken: 'pk.eyJ1Ijoia3ZhbnNlbG91cyIsImEiOiJjazZsbHE2NGwwZDdtM2tvNmRjc2N0NHo5In0.h_W_-4R3haPMK-IDBTcL-w' 
                        }).addTo(map2);      
                
                var osmI1 = L.tileLayer('https://{s}.tile.osm.org/{z}/{x}/{y}.png', {
                        attribution: '&copy; <a href="https://osm.org/copyright">OpenStreetMap</a> contributors',
                        maxZoom: 18
                        }).addTo(map2);     

                
                        function styleoutlet(feature) {
                            return {
                                fillColor: 'pink' ((feature.properties.OnpremisePSC)),
                                weight: 2,
                                opacity: 1,
                                color: 'black',
                                fillOpacity: 0.7
                            };
                        }

                
                var nineteen= L.geoJSON(outlets, { 
                            filter: function(feature, layer) {
                                return feature.properties.sixmosactiveyear == "2019";
                            },
                            pointToLayer: function(feature, coordinates) {
                            return L.circleMarker(coordinates,circle1);
                            },
                            onEachFeature: function (feature, layer) {
                            popupOptions = {maxWidth: 200}; 
                            layer.bindPopup("<br><b> Name: </b>" + feature.properties.doing_business_as +
                            "<br> <b>Address: </b>" + feature.properties.address +  
                            "<br><b>Year: </b>" + feature.properties.sixmosactiveyear +
                            "<br><b>Number Of Licenses: </b>" + feature.properties.numlics 
                            )}, style: function(feature) {
                              switch (feature.properties.onpremisePSC) {
                                 case 1: return {color: "#ff0000"};
                            }
                            switch (feature.properties.offpremisePSC) {
                                 case 1: return {color: "#0000ff"};
                            }
                            }
                        }).addTo(map2);
                
                var eighteen= L.geoJSON(outlets, { 
                            filter: function(feature, layer) {
                                return feature.properties.sixmosactiveyear == "2018";
                            },
                            pointToLayer: function(feature, coordinates) {
                            return L.circleMarker(coordinates,circle1);
                            },
                            onEachFeature: function (feature, layer) {
                            popupOptions = {maxWidth: 200}; 
                            layer.bindPopup("<br><b> Name: </b>" + feature.properties.doing_business_as +
                            "<br> <b>Address: </b>" + feature.properties.address +  
                            "<br><b>Year: </b>" + feature.properties.sixmosactiveyear +
                            "<br><b>Number Of Licenses: </b>" + feature.properties.numlics  
                            )}, style: function(feature) {
                              switch (feature.properties.onpremisePSC) {
                                 case 1: return {color: "#ff0000"};
                            }
                            switch (feature.properties.offpremisePSC) {
                                 case 1: return {color: "#0000ff"};
                            }
                            }
                        }).addTo(map2);
                var seventeen=  L.geoJSON(outlets, { 
                            filter: function(feature, layer) {
                                return feature.properties.sixmosactiveyear == "2017";
                            },
                            pointToLayer: function(feature, coordinates) {
                            return L.circleMarker(coordinates,circle1);
                            },
                            onEachFeature: function (feature, layer) {
                            popupOptions = {maxWidth: 200}; 
                            layer.bindPopup("<br><b> Name: </b>" + feature.properties.doing_business_as +
                            "<br> <b>Address: </b>" + feature.properties.address +  
                            "<br><b>Year: </b>" + feature.properties.sixmosactiveyear +
                            "<br><b>Number Of Licenses: </b>" + feature.properties.numlics 
                             )}, style: function(feature) {
                              switch (feature.properties.onpremisePSC) {
                                 case 1: return {color: "#ff0000"};
                            }
                            switch (feature.properties.offpremisePSC) {
                                 case 1: return {color: "#0000ff"};
                            }
                            }
                        }).addTo(map2);
                     
                var sixteen=  L.geoJSON(outlets, { 
                            filter: function(feature, layer) {
                                return feature.properties.sixmosactiveyear == "2016";
                            },
                            pointToLayer: function(feature, coordinates) {
                            return L.circleMarker(coordinates,circle1);
                            },
                            onEachFeature: function (feature, layer) {
                            popupOptions = {maxWidth: 200}; 
                            layer.bindPopup("<br><b> Name: </b>" + feature.properties.doing_business_as +
                            "<br> <b>Address: </b>" + feature.properties.address +  
                            "<br><b>Year: </b>" + feature.properties.sixmosactiveyear +
                            "<br><b>Number Of Licenses: </b>" + feature.properties.numlics 
                             )}, style: function(feature) {
                              switch (feature.properties.onpremisePSC) {
                                 case 1: return {color: "#ff0000"};
                            }
                            switch (feature.properties.offpremisePSC) {
                                 case 1: return {color: "#0000ff"};
                            }
                            }
                        }).addTo(map2);
                
                 var fifteen=  L.geoJSON(outlets, { 
                            filter: function(feature, layer) {
                                return feature.properties.sixmosactiveyear == "2015";
                            },
                            pointToLayer: function(feature, coordinates) {
                            return L.circleMarker(coordinates,circle1);
                            },
                            onEachFeature: function (feature, layer) {
                            popupOptions = {maxWidth: 200}; 
                            layer.bindPopup("<br><b> Name: </b>" + feature.properties.doing_business_as +
                            "<br> <b>Address: </b>" + feature.properties.address +  
                            "<br><b>Year: </b>" + feature.properties.sixmosactiveyear +
                            "<br><b>Number Of Licenses: </b>" + feature.properties.numlics  )}, style: function(feature) {
                              switch (feature.properties.onpremisePSC) {
                                 case 1: return {color: "#ff0000"};
                            }
                            switch (feature.properties.offpremisePSC) {
                                 case 1: return {color: "#0000ff"};
                            }
                            }
                        }).addTo(map2);

                 var fourteen =  L.geoJSON(outlets, { 
                            filter: function(feature, layer) {
                                return feature.properties.sixmosactiveyear == "2014";
                            },
                            pointToLayer: function(feature, coordinates) {
                            return L.circleMarker(coordinates,circle1);
                            },
                            onEachFeature: function (feature, layer) {
                            popupOptions = {maxWidth: 200}; 
                            layer.bindPopup("<br><b> Name: </b>" + feature.properties.doing_business_as +
                            "<br> <b>Address: </b>" + feature.properties.address +  
                            "<br><b>Year: </b>" + feature.properties.sixmosactiveyear +
                            "<br><b>NumberOfLicenses: </b>" + feature.properties.numlics  )}, style: function(feature) {
                              switch (feature.properties.onpremisePSC) {
                                 case 1: return {color: "#ff0000"};
                            }
                            switch (feature.properties.offpremisePSC) {
                                 case 1: return {color: "#0000ff"};
                            }
                            }
                        }).addTo(map2);

                var thirteen=  L.geoJSON(outlets, { 
                            filter: function(feature, layer) {
                                return feature.properties.sixmosactiveyear == "2013";
                            },
                            pointToLayer: function(feature, coordinates) {
                            return L.circleMarker(coordinates,circle1);
                            },
                            onEachFeature: function (feature, layer) {
                            popupOptions = {maxWidth: 200}; 
                            layer.bindPopup("<br><b> Name: </b>" + feature.properties.doing_business_as +
                            "<br> <b>Address: </b>" + feature.properties.address +  
                            "<br><b>Year: </b>" + feature.properties.sixmosactiveyear +
                            "<br><b>Number Of Licenses: </b>" + feature.properties.numlics  
                            )}, style: function(feature) {
                              switch (feature.properties.onpremisePSC) {
                                 case 1: return {color: "#ff0000"};
                            }
                            switch (feature.properties.offpremisePSC) {
                                 case 1: return {color: "#0000ff"};
                            }
                            }
                        }).addTo(map2);
                
                var twelve=  L.geoJSON(outlets, { 
                            filter: function(feature, layer) {
                                return feature.properties.sixmosactiveyear == "2012";
                            },
                            pointToLayer: function(feature, coordinates) {
                            return L.circleMarker(coordinates,circle1);
                            },
                            onEachFeature: function (feature, layer) {
                            popupOptions = {maxWidth: 200}; 
                            layer.bindPopup("<br><b> Name: </b>" + feature.properties.doing_business_as +
                            "<br> <b>Address: </b>" + feature.properties.address +  
                            "<br><b>Year: </b>" + feature.properties.sixmosactiveyear +
                            "<br><b>Number Of Licenses: </b>" + feature.properties.numlics  
                            )}, style: function(feature) {
                              switch (feature.properties.onpremisePSC) {
                                 case 1: return {color: "#ff0000"};
                            }
                            switch (feature.properties.offpremisePSC) {
                                 case 1: return {color: "#0000ff"};
                            }
                            }
                        }).addTo(map2);
                
                var eleven=  L.geoJSON(outlets, { 
                            filter: function(feature, layer) {
                                return feature.properties.sixmosactiveyear == "2011";
                            },
                            pointToLayer: function(feature, coordinates) {
                            return L.circleMarker(coordinates,circle1);
                            },
                            onEachFeature: function (feature, layer) {
                            popupOptions = {maxWidth: 200}; 
                            layer.bindPopup("<br><b> Name: </b>" + feature.properties.doing_business_as +
                            "<br> <b>Address: </b>" + feature.properties.address +  
                            "<br><b>Year: </b>" + feature.properties.sixmosactiveyear +
                            "<br><b>NumberOfLicenses: </b>" + feature.properties.numlics  
                            )}, style: function(feature) {
                              switch (feature.properties.onpremisePSC) {
                                 case 1: return {color: "#ff0000"};
                            }
                            switch (feature.properties.offpremisePSC) {
                                 case 1: return {color: "#0000ff"};
                            }
                            }
                        }).addTo(map2);

                var ten=  L.geoJSON(outlets, { 
                            filter: function(feature, layer) {
                                return feature.properties.sixmosactiveyear == "2010";
                            },
                            pointToLayer: function(feature, coordinates) {
                            return L.circleMarker(coordinates,circle1);
                            },
                            onEachFeature: function (feature, layer) {
                            popupOptions = {maxWidth: 200}; 
                            layer.bindPopup("<br><b> Name: </b>" + feature.properties.doing_business_as +
                            "<br> <b>Address: </b>" + feature.properties.address +  
                            "<br><b>Year: </b>" + feature.properties.sixmosactiveyear +
                            "<br><b>NumberOfLicenses: </b>" + feature.properties.numlics  
                            )}, style: function(feature) {
                              switch (feature.properties.onpremisePSC) {
                                 case 1: return {color: "#ff0000"};
                            }
                            switch (feature.properties.offpremisePSC) {
                                 case 1: return {color: "#0000ff"};
                            }
                            }
                        }).addTo(map2);

                var nine =  L.geoJSON(outlets, { 
                            filter: function(feature, layer) {
                                return feature.properties.sixmosactiveyear == "2009";
                            },
                            pointToLayer: function(feature, coordinates) {
                            return L.circleMarker(coordinates,circle1);
                            },
                            onEachFeature: function (feature, layer) {
                            popupOptions = {maxWidth: 200}; 
                            layer.bindPopup("<br><b> Name: </b>" + feature.properties.doing_business_as +
                            "<br> <b>Address: </b>" + feature.properties.address +  
                            "<br><b>Year: </b>" + feature.properties.sixmosactiveyear +
                            "<br><b>Number Of Licenses: </b>" + feature.properties.numlics  
                            )}, style: function(feature) {
                              switch (feature.properties.onpremisePSC) {
                                 case 1: return {color: "#ff0000"};
                            }
                            switch (feature.properties.offpremisePSC) {
                                 case 1: return {color: "#0000ff"};
                            }
                            }
                        }).addTo(map2);

                var eight=  L.geoJSON(outlets, { 
                            filter: function(feature, layer) {
                                return feature.properties.sixmosactiveyear == "2008";
                            },
                            pointToLayer: function(feature, coordinates) {
                            return L.circleMarker(coordinates,circle1);
                            },
                            onEachFeature: function (feature, layer) {
                            popupOptions = {maxWidth: 200}; 
                            layer.bindPopup("<br><b> Name: </b>" + feature.properties.doing_business_as +
                            "<br> <b>Address: </b>" + feature.properties.address +  
                            "<br><b>Year: </b>" + feature.properties.sixmosactiveyear +
                            "<br><b>Number Of Licenses: </b>" + feature.properties.numlics  
                            )}, style: function(feature) {
                              switch (feature.properties.onpremisePSC) {
                                 case 1: return {color: "#ff0000"};
                            }
                            switch (feature.properties.offpremisePSC) {
                                 case 1: return {color: "#0000ff"};
                            }
                            }
                        }).addTo(map2);


                        function getColorI1(d) {
                            return d > 17.351977  ? '#FFFF0080' :
                                d > 10.687996  ? '#32CD3280' :
                                d > 8.498743  ? '#00808080' :
                                d > 7.168206  ? '#00008B80' :
                                d > 0   ? '#3F00FF80' :
                                            '#white';
                                            }





                        function styleI1(feature) {
                            return {
                                fillColor: getColorI1((feature.properties.SAIoutlet_miles)),
                                weight: 2,
                                opacity: 1,
                                color: 'black',
                                fillOpacity: 0.7
                            };
                        }


                        var ISAI = L.geoJson(icchlor, {style: styleI1});

                var basemapI1 = {
                    "Alcohol Outlets" : osmI1,
                };

                var overlayMapsI1 = {
                        "2019 Outlets": nineteen,
                        "2018 Outlets": eighteen,
                        "2017 Outlets": seventeen,
                        "2016 Outlets": sixteen,
                        "2015 Outlets": fifteen,
                        "2014 Outlets": fourteen,
                        "2013 Outlets": thirteen,
                        "2012 Outlets": twelve,
                        "2011 Outlets": eleven,
                        "2010 Outlets": ten,
                        "2009 Outlets": nine,
                        "2008 Outlets": eight,
                        "Alcohol Outlet Density by Census Block in 2019": ISAI
                        };			

                var basemapI12 = {
                    "Community Items" : osmI1,
                };

                var overlayMapsI12 = {
                        "Schools": schools, 
                        "Alchol Related Crashes": crashes
                        };			


                    L.control.layers(basemapI1, overlayMapsI1, { collapsed: false }).addTo(map2);	
                    L.control.layers(basemapI12, overlayMapsI12, { position: 'topleft', collapsed: false }).addTo(map2);	

                //Marshalltown Maps
                var map3 = L.map('map3').setView([42.0495, -92.9080], 12);
                            L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
                            attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
                            maxZoom: 18,
                            id: 'mapbox/streets-v11',
                            accessToken: 'pk.eyJ1Ijoia3ZhbnNlbG91cyIsImEiOiJjazZsbHE2NGwwZDdtM2tvNmRjc2N0NHo5In0.h_W_-4R3haPMK-IDBTcL-w' 
                            }).addTo(map3);     
                
                var osmm1 = L.tileLayer('https://{s}.tile.osm.org/{z}/{x}/{y}.png', {
                        attribution: '&copy; <a href="https://osm.org/copyright">OpenStreetMap</a> contributors',
                        maxZoom: 18
                        }).addTo(map3);
            
                                
                        var all= L.geoJSON(outlets, { 
                            filter: function(feature, layer) {
                                return feature.properties.sixmosactiveyear == "2019";
                            },
                            pointToLayer: function(feature, coordinates) {
                            return L.circleMarker(coordinates,circle1);
                            },
                            onEachFeature: function (feature, layer) {
                            popupOptions = {maxWidth: 200}; 
                            layer.bindPopup("<br><b> Name: </b>" + feature.properties.doing_business_as +
                            "<br> <b>Address: </b>" + feature.properties.address +  
                            "<br><b>Year: </b>" + feature.properties.sixmosactiveyear +
                            "<br><b>Number Of Licenses: </b>" + feature.properties.numlics  
                            )}, style: function(feature) {
                              switch (feature.properties.onpremisePSC) {
                                 case 1: return {color: "#ff0000"};
                            }
                            switch (feature.properties.offpremisePSC) {
                                 case 1: return {color: "#0000ff"};
                            }
                            }
                        }).addTo(map3);
                

                        function getColorm1(d) {
                            return d > 18.748103 ? '#FFFF0080' :
                                d > 14.884174 ? '#32CD3280' :
                                d > 11.323752  ? '#008080' :
                                d > 7.133859   ? '#00008B80' :
                                d > 0   ? '#3F00FF80' :
                                            '#white';
                                            }
                        
                        function getColorm2(d) {
                            return d > 131.430312 ? '#FFFF0080' :
                                d > 68.919122 ? '#32CD3280' :
                                d > 35.15401 ? '#00808080' :
                                d > 12.566793   ? '#00008B80' :
                                d > 0   ? '#3F00FF80' :
                                            '#white';
                                            }
                       
                         function getColorm3(d) {
                            return d > 87.49023 ? '#FFFF0080' :
                                d > 49.48195 ? '#32CD3280' :
                                d > 28.34843 ? '#00808080' :
                                d > 12.406792   ? '#00008B80' :
                                d > 0   ? '#3F00FF80' :
                                            '#white';
                                            }
                        
                        function getColorm4(d) {
                            return d > 42.952513 ? '#FFFF0080' :
                                d > 29.78173 ? '#32CD3280' :
                                d > 17.067713 ? '#00808080' :
                                d > 9.205279   ? '#00008B80' :
                                d > 0   ? '#3F00FF80' :
                                            '#white';
                                            }
                        
                        function getColorm5(d) {
                            return d > 42.952513 ? '#FFFF0080' :
                                d > 29.78173 ? '#32CD3280' :
                                d > 17.067713 ? '#00808080' :
                                d > 9.205279   ? '#00008B80' :
                                d > 0   ? '#3F00FF80' :
                                            '#white';
                                            }
                       
                         function getColorm6(d) {
                            return d > 14.822238 ? '#FFFF0080' :
                                d > 11.768905 ? '#32CD3280' :
                                d > 10.103444 ? '#00808080' :
                                d > 6.377327   ? '#00008B80' :
                                d > 0   ? '#3F00FF80' :
                                            '#white';
                                            }

                        function getColorm7(d) {
                            return d > 13.689378 ? '#FFFF0080' :
                                d > 10.551444 ? '#32CD3280' :
                                d > 8.476797 ? '#00808080' :
                                d > 6.196528   ? '#00008B80' :
                                d > 0   ? '#3F00FF80' :
                                            '#white';
                                            }

                        function stylem1(feature) {
                            return {
                                fillColor: getColorm1((feature.properties.SAIoutlet_miles)),
                                weight: 2,
                                opacity: 1,
                                color: 'black',
                                fillOpacity: 0.7
                            };
                        }

                        function stylem2(feature) {
                            return {
                                fillColor: getColorm2((feature.properties.SAIfamily_miles)),
                                weight: 2,
                                opacity: 1,
                                color: 'black',
                                fillOpacity: 0.7
                            };
                        }

                        function stylem3(feature) {
                            return {
                                fillColor: getColorm3((feature.properties.SAIviolent_miles)),
                                weight: 2,
                                opacity: 1,
                                color: 'black',
                                fillOpacity: 0.7
                            };
                        }
                        function stylem4(feature) {
                            return {
                                fillColor: getColorm4((feature.properties.SAIalc1_miles)),
                                weight: 2,
                                opacity: 1,
                                color: 'black',
                                fillOpacity: 0.7
                            };
                        }

                        function stylem5(feature) {
                            return {
                                fillColor: getColorm5((feature.properties.SAInarralc1_miles)),
                                weight: 2,
                                opacity: 1,
                                color: 'black',
                                fillOpacity: 0.7
                            };
                        }
                       
                        function stylem6(feature) {
                            return {
                                fillColor: getColorm6((feature.properties.SAIOnoutlet_miles)),
                                weight: 2,
                                opacity: 1,
                                color: 'black',
                                fillOpacity: 0.7
                            };
                        }

                        function stylem7(feature) {
                            return {
                                fillColor: getColorm7((feature.properties.SAIOffoutlet_miles)),
                                weight: 2,
                                opacity: 1,
                                color: 'black',
                                fillOpacity: 0.7
                            };
                        }

                        var MSAI = L.geoJson(Mdata, {style: stylem1});
                        var MSAI_family = L.geoJson(Mdata, {style: stylem2});
                        var MSAI_violent= L.geoJson(Mdata, {style: stylem3});
                        var MSAI_alc= L.geoJson(Mdata, {style: stylem4});
                        var MSAI_narralc= L.geoJson(Mdata, {style: stylem5});
                        var MSAI_On= L.geoJson(Mdata, {style: stylem6});
                        var MSAI_Off= L.geoJson(Mdata, {style: stylem7});

                        var basemapM1 = {
                        "Family Calls for Service": MSAI_family,
                        "Violent Crime Calls for Service": MSAI_violent,
                        "Alcohol Calls for Service": MSAI_alc,
                        "Narrowed Alcohol Calls for Service": MSAI_narralc,
                        "Alcohol Outlet Density by Census Block in 2019": MSAI,
                        "On Premise Alcohol Outlet Density by Census Block in 2019 ": MSAI_On,
                        "Off Premise Alcohol Outlet Density by Census Block in 2019": MSAI_Off,
                        "Family Calls for Service": MSAI_family,
                        "Violent Crime Calls for Service": MSAI_violent,
                        "Alcohol Calls for Service": MSAI_alc,
                        "Narrowed Alcohol Calls for Service": MSAI_narralc,
                        "Alcohol Outlet Density by Census Block in 2019": MSAI,
                        "On Premise Alcohol Outlet Density by Census Block in 2019 ": MSAI_On,
                        "Off Premise Alcohol Outlet Density by Census Block in 2019": MSAI_Off,
                           };  

                var overlayMapsM1 = {
                        "2019 Outlets": all,
                        "Schools": schools, 
                        "Alchol Related Crashes": crashes,
                        "Open Street Map" : osmm1
                        };			

                    L.control.layers(basemapM1, overlayMapsM1).addTo(map3);	
    
		             
                 
                 //Burlington Maps
                 var map4 = L.map('map4').setView([40.8077, -91.1129], 13);
                        L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
                        attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
                        maxZoom: 18,
                        id: 'mapbox/streets-v11',
                        accessToken: 'pk.eyJ1Ijoia3ZhbnNlbG91cyIsImEiOiJjazZsbHE2NGwwZDdtM2tvNmRjc2N0NHo5In0.h_W_-4R3haPMK-IDBTcL-w' 
                        }).addTo(map4);      
                
                var osmb1 = L.tileLayer('https://{s}.tile.osm.org/{z}/{x}/{y}.png', {
                        attribution: '&copy; <a href="https://osm.org/copyright">OpenStreetMap</a> contributors',
                        maxZoom: 18
                        }).addTo(map4);


                var nineteen= L.geoJSON(outlets, { 
                            filter: function(feature, layer) {
                                return feature.properties.sixmosactiveyear == "2019";
                            },
                            pointToLayer: function(feature, coordinates) {
                            return L.circleMarker(coordinates,circle1);
                            },
                            onEachFeature: function (feature, layer) {
                            popupOptions = {maxWidth: 200}; 
                            layer.bindPopup("<br><b> Name: </b>" + feature.properties.doing_business_as +
                            "<br> <b>Address: </b>" + feature.properties.address +  
                            "<br><b>Year: </b>" + feature.properties.sixmosactiveyear +
                            "<br><b>Number Of Licenses: </b>" + feature.properties.numlics  
                            )}, style: function(feature) {
                              switch (feature.properties.onpremisePSC) {
                                 case 1: return {color: "#ff0000"};
                            }
                            switch (feature.properties.offpremisePSC) {
                                 case 1: return {color: "#0000ff"};
                            }
                            }
                        }).addTo(map4);
                
                var eighteen= L.geoJSON(outlets, { 
                            filter: function(feature, layer) {
                                return feature.properties.sixmosactiveyear == "2018";
                            },
                            pointToLayer: function(feature, coordinates) {
                            return L.circleMarker(coordinates,circle1);
                            },
                            onEachFeature: function (feature, layer) {
                            popupOptions = {maxWidth: 200}; 
                            layer.bindPopup("<br><b> Name: </b>" + feature.properties.doing_business_as +
                            "<br> <b>Address: </b>" + feature.properties.address +  
                            "<br><b>Year: </b>" + feature.properties.sixmosactiveyear +
                            "<br><b>Number Of Licenses: </b>" + feature.properties.numlics  
                            )}, style: function(feature) {
                              switch (feature.properties.onpremisePSC) {
                                 case 1: return {color: "#ff0000"};
                            }
                            switch (feature.properties.offpremisePSC) {
                                 case 1: return {color: "#0000ff"};
                            }
                            }
                        }).addTo(map4);
                
                var seventeen=  L.geoJSON(outlets, { 
                            filter: function(feature, layer) {
                                return feature.properties.sixmosactiveyear == "2017";
                            },
                            pointToLayer: function(feature, coordinates) {
                            return L.circleMarker(coordinates,circle1);
                            },
                            onEachFeature: function (feature, layer) {
                            popupOptions = {maxWidth: 200}; 
                            layer.bindPopup("<br><b> Name: </b>" + feature.properties.doing_business_as +
                            "<br> <b>Address: </b>" + feature.properties.address +  
                            "<br><b>Year: </b>" + feature.properties.sixmosactiveyear +
                            "<br><b>Number Of Licenses: </b>" + feature.properties.numlics  
                            )}, style: function(feature) {
                              switch (feature.properties.onpremisePSC) {
                                 case 1: return {color: "#ff0000"};
                            }
                            switch (feature.properties.offpremisePSC) {
                                 case 1: return {color: "#0000ff"};
                            }
                            }
                        }).addTo(map4);
              
                
                var sixteen=  L.geoJSON(outlets, { 
                            filter: function(feature, layer) {
                                return feature.properties.sixmosactiveyear == "2016";
                            },
                            pointToLayer: function(feature, coordinates) {
                            return L.circleMarker(coordinates,circle1);
                            },
                            onEachFeature: function (feature, layer) {
                            popupOptions = {maxWidth: 200}; 
                            layer.bindPopup("<br><b> Name: </b>" + feature.properties.doing_business_as +
                            "<br> <b>Address: </b>" + feature.properties.address +  
                            "<br><b>Year: </b>" + feature.properties.sixmosactiveyear +
                            "<br><b>Number Of Licenses: </b>" + feature.properties.numlics  
                             )}, style: function(feature) {
                              switch (feature.properties.onpremisePSC) {
                                 case 1: return {color: "#ff0000"};
                            }
                            switch (feature.properties.offpremisePSC) {
                                 case 1: return {color: "#0000ff"};
                            }
                            }
                        }).addTo(map4);
                
                 var fifteen=  L.geoJSON(outlets, { 
                            filter: function(feature, layer) {
                                return feature.properties.sixmosactiveyear == "2015";
                            },
                            pointToLayer: function(feature, coordinates) {
                            return L.circleMarker(coordinates,circle1);
                            },
                            onEachFeature: function (feature, layer) {
                            popupOptions = {maxWidth: 200}; 
                            layer.bindPopup("<br><b> Name: </b>" + feature.properties.doing_business_as +
                            "<br> <b>Address: </b>" + feature.properties.address +  
                            "<br><b>Year: </b>" + feature.properties.sixmosactiveyear +
                            "<br><b>Number Of Licenses: </b>" + feature.properties.numlics   
                            )}, style: function(feature) {
                              switch (feature.properties.onpremisePSC) {
                                 case 1: return {color: "#ff0000"};
                            }
                            switch (feature.properties.offpremisePSC) {
                                 case 1: return {color: "#0000ff"};
                            }
                            }
                        }).addTo(map4);
                
                 var fourteen =  L.geoJSON(outlets, { 
                            filter: function(feature, layer) {
                                return feature.properties.sixmosactiveyear == "2014";
                            },
                            pointToLayer: function(feature, coordinates) {
                            return L.circleMarker(coordinates,circle1);
                            },
                            onEachFeature: function (feature, layer) {
                            popupOptions = {maxWidth: 200}; 
                            layer.bindPopup("<br><b> Name: </b>" + feature.properties.doing_business_as +
                            "<br> <b>Address: </b>" + feature.properties.address +  
                            "<br><b>Year: </b>" + feature.properties.sixmosactiveyear +
                            "<br><b>Number Of Licenses: </b>" + feature.properties.numlics  
                             )}, style: function(feature) {
                              switch (feature.properties.onpremisePSC) {
                                 case 1: return {color: "#ff0000"};
                            }
                            switch (feature.properties.offpremisePSC) {
                                 case 1: return {color: "#0000ff"};
                            }
                            }
                        }).addTo(map4);

                var thirteen=  L.geoJSON(outlets, { 
                            filter: function(feature, layer) {
                                return feature.properties.sixmosactiveyear == "2013";
                            },
                            pointToLayer: function(feature, coordinates) {
                            return L.circleMarker(coordinates,circle1);
                            },
                            onEachFeature: function (feature, layer) {
                            popupOptions = {maxWidth: 200}; 
                            layer.bindPopup("<br><b> Name: </b>" + feature.properties.doing_business_as +
                            "<br> <b>Address: </b>" + feature.properties.address +  
                            "<br><b>Year: </b>" + feature.properties.sixmosactiveyear +
                            "<br><b>Number Of Licenses: </b>" + feature.properties.numlics   
                            )}, style: function(feature) {
                              switch (feature.properties.onpremisePSC) {
                                 case 1: return {color: "#ff0000"};
                            }
                            switch (feature.properties.offpremisePSC) {
                                 case 1: return {color: "#0000ff"};
                            }
                            }
                        }).addTo(map4);
                
                var twelve=  L.geoJSON(outlets, { 
                            filter: function(feature, layer) {
                                return feature.properties.sixmosactiveyear == "2012";
                            },
                            pointToLayer: function(feature, coordinates) {
                            return L.circleMarker(coordinates,circle1);
                            },
                            onEachFeature: function (feature, layer) {
                            popupOptions = {maxWidth: 200}; 
                            layer.bindPopup("<br><b> Name: </b>" + feature.properties.doing_business_as +
                            "<br> <b>Address: </b>" + feature.properties.address +  
                            "<br><b>Year: </b>" + feature.properties.sixmosactiveyear +
                            "<br><b>Number Of Licenses: </b>" + feature.properties.numlics   
                            )}, style: function(feature) {
                              switch (feature.properties.onpremisePSC) {
                                 case 1: return {color: "#ff0000"};
                            }
                            switch (feature.properties.offpremisePSC) {
                                 case 1: return {color: "#0000ff"};
                            }
                            }
                        }).addTo(map4);
                
                var eleven=  L.geoJSON(outlets, { 
                            filter: function(feature, layer) {
                                return feature.properties.sixmosactiveyear == "2011";
                            },
                            pointToLayer: function(feature, coordinates) {
                            return L.circleMarker(coordinates,circle1);
                            },
                            onEachFeature: function (feature, layer) {
                            popupOptions = {maxWidth: 200}; 
                            layer.bindPopup("<br><b> Name: </b>" + feature.properties.doing_business_as +
                            "<br> <b>Address: </b>" + feature.properties.address +  
                            "<br><b>Year: </b>" + feature.properties.sixmosactiveyear +
                            "<br><b>Number Of Licenses: </b>" + feature.properties.numlics  
                             )}, style: function(feature) {
                              switch (feature.properties.onpremisePSC) {
                                 case 1: return {color: "#ff0000"};
                            }
                            switch (feature.properties.offpremisePSC) {
                                 case 1: return {color: "#0000ff"};
                            }
                            }
                        }).addTo(map4);

                var ten=  L.geoJSON(outlets, { 
                            filter: function(feature, layer) {
                                return feature.properties.sixmosactiveyear == "2010";
                            },
                            pointToLayer: function(feature, coordinates) {
                            return L.circleMarker(coordinates,circle1);
                            },
                            onEachFeature: function (feature, layer) {
                            popupOptions = {maxWidth: 200}; 
                            layer.bindPopup("<br><b> Name: </b>" + feature.properties.doing_business_as +
                            "<br> <b>Address: </b>" + feature.properties.address +  
                            "<br><b>Year: </b>" + feature.properties.sixmosactiveyear +
                            "<br><b>Number Of Licenses: </b>" + feature.properties.numlics  
                             )}, style: function(feature) {
                              switch (feature.properties.onpremisePSC) {
                                 case 1: return {color: "#ff0000"};
                            }
                            switch (feature.properties.offpremisePSC) {
                                 case 1: return {color: "#0000ff"};
                            }
                            }
                        }).addTo(map4);

                var nine =  L.geoJSON(outlets, { 
                            filter: function(feature, layer) {
                                return feature.properties.sixmosactiveyear == "2009";
                            },
                            pointToLayer: function(feature, coordinates) {
                            return L.circleMarker(coordinates,circle1);
                            },
                            onEachFeature: function (feature, layer) {
                            popupOptions = {maxWidth: 200}; 
                            layer.bindPopup("<br><b> Name: </b>" + feature.properties.doing_business_as +
                            "<br> <b>Address: </b>" + feature.properties.address +  
                            "<br><b>Year: </b>" + feature.properties.sixmosactiveyear +
                            "<br><b>Number Of Licenses: </b>" + feature.properties.numlics  
                             )}, style: function(feature) {
                              switch (feature.properties.onpremisePSC) {
                                 case 1: return {color: "#ff0000"};
                            }
                            switch (feature.properties.offpremisePSC) {
                                 case 1: return {color: "#0000ff"};
                            }
                            }
                        }).addTo(map4);

                var eight=  L.geoJSON(outlets, { 
                            filter: function(feature, layer) {
                                return feature.properties.sixmosactiveyear == "2008";
                            },
                            pointToLayer: function(feature, coordinates) {
                            return L.circleMarker(coordinates,circle1);
                            },
                            onEachFeature: function (feature, layer) {
                            popupOptions = {maxWidth: 200}; 
                            layer.bindPopup("<br><b> Name: </b>" + feature.properties.doing_business_as +
                            "<br> <b>Address: </b>" + feature.properties.address +  
                            "<br><b>Year: </b>" + feature.properties.sixmosactiveyear +
                            "<br><b>Number Of Licenses: </b>" + feature.properties.numlics  
                            )}, style: function(feature) {
                              switch (feature.properties.onpremisePSC) {
                                 case 1: return {color: "#ff0000"};
                            }
                            switch (feature.properties.offpremisePSC) {
                                 case 1: return {color: "#0000ff"};
                            }
                            }
                        }).addTo(map4);


                        function getColorb1(d) {
                            return d > 21.311043  ? '#FFFF0080' :
                                d > 17.145912 ? '#32CD3280' :
                                d > 11.940675  ? '#00808080' :
                                d > 9.771186   ? '#00008B80' :
                                d > 0   ? '#3F00FF80' :
                                            '#white';
                                    }



                        function styleb1(feature) {
                            return {
                                fillColor: getColorb1((feature.properties.SAIoutlet_miles)),
                                weight: 2,
                                opacity: 1,
                                color: 'black',
                                fillOpacity: 0.7
                            };
                        }


                        var BSAI = L.geoJson(bur, {style: styleb1});

                var basemapB1 = {
                    "Open Street Map" : osmb1,
                };


                var overlayMapsB1 = {
                        "2019 Outlets": nineteen,
                        "2018 Outlets": eighteen,
                        "2017 Outlets": seventeen,
                        "2016 Outlets": sixteen,
                        "2015 Outlets": fifteen,
                        "2014 Outlets": fourteen,
                        "2013 Outlets": thirteen,
                        "2012 Outletsd": twelve,
                        "2011 Outlets": eleven,
                        "2010 Outlets": ten,
                        "2009 Outlets": nine,
                        "2008 Outlets": eight,
                        "Schools": schools,  
                        "Alchol Related Crashes": crashes,
                        "Alcohol Outlet Density by Census Block in 2019": BSAI
                        };			

                    L.control.layers(basemapB1, overlayMapsB1).addTo(map4);	
    
		             
            </script>
        
        </body>
        
</html>