<!DOCTYPE html>

    <html>

        <head>
            
            <meta name="description" content="ARI Exploration">
            <meta charset="utf-8">
            <meta name="viewport" content="width=device-width">
             
            <title>ARI</title>
            
            <meta name="viewport" content="width=device-width, initial-scale=1">
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

            <!--Add Leaflet CSS-->
            <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css" />
            <script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"></script>
            <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
            integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
            crossorigin=""></script>
            
            <!--Load in Heat plugin -->
            <script src="https://leaflet.github.io/Leaflet.heat/dist/leaflet-heat.js"></script>
            <script src="https://code.jquery.com/jquery-3.1.0.js"></script>  

            <!--KVS geoJSON-->    
            <script src="Totalsales.geojson"></script>

             <!--Boot Strap-->
             <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
             <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css">
            
            <div class="navbar">
                <a href="https://kvanselous.github.io/ARIDashboard/">Home</a>
                <a href="https://kvanselous.github.io/ARIDashboard/Sales/">Sales</a>
                <a href="https://publicsciencecollaborative.shinyapps.io/abd_tobacco/">Tobacco</a>
                <a href="https://kvanselous.github.io/ARIDashboard/Violations/">Violations</a>
                <a href="https://kvanselous.github.io/ARIDashboard/Health/">Health & Safety</a>
                <a href="https://kvanselous.github.io/ARIDashboard/Deliverables/">Deliverale List</a>
           
            
            </div>
           
    
              
          
       
                <style>
 
                    h1 {text-align: center; font-size: 50px}
                    h2 {text-align: center; margin-left: 10px}
                    h3 {text-align: center; margin-left: 10px}
                    h4 {margin-left: 10px}
                    h5 {margin-left: 10px}

                    .center {
                    display: block;
                    margin-left: auto;
                    margin-right: auto;
                    width: 25%;
                    } 

                    #map1container {border: 1px solid#0a0a0a; position:absolute; background-color:#ecf7fc; color:black; text-align:left; margin-right: 0px; margin-left:5px; width:600px; height:800px;padding 0; }
                    #map1 {border: 1px solid#0a0a0a; position: relative; width:1250px; height:800px; margin-left:600px;border-left:2px; padding 0; overflow:hidden;}

                     /* The navigation bar */
                     .navbar {
                    overflow: hidden;
                    background-color: #333;
                    position: relative; /* Set the navbar to fixed position */
                    top: 0; /* Position the navbar at the top of the page */
                    width: 100%; /* Full width */
                    }

                    /* Links inside the navbar */
                    .navbar a {
                    float: left;
                    display: block;
                    color: #f2f2f2;
                    text-align: center;
                    padding: 14px 16px;
                    text-decoration: none;
                    }

                    /* Change background on mouse-over */
                    .navbar a:hover {
                    background: #ddd;
                    color: black;
                    }

                    /* Main content */
                    .main {
                    margin-top: 30px; /* Add a top margin to avoid content overlay */
                    }


                </style>
        
        </head>

    <body>   
           
        <!--Title-->
       
       
        <img src="ARI.jpg" height=55% width=55% >
        <img src="logonew.jpg" height=35% width=35% class="top-left" >
        
        <div id='map1container'>
        <h3>Liquor Sales<BR> By Indivdual Retail Location 2010-2020</h3>      
        <h3>Markers Proportioned Per 10,000 Gallons</h3>
        <h4> Deliverable 1: Collect and clean the most recent and comprehensive data on liquor sales in Iowa from the state data repository 
        <br> Deliverable 2: Create an interactive, dynamic map that projects the location and relevant descriptive information (e.g. date, retailer name, sales information) concerning the sale of liquor in Iowa and a single, clean dataset containing all of the data used to create the map.</h4>
        <h5> Dataset description from website: This dataset contains the spirits purchase information of Iowa Class “E” liquor licensees by product and date of purchase from January 1, 2012 to current. The dataset can be used to analyze total spirits sales in Iowa of individual products at the store level. Class E liquor license, for grocery stores, liquor stores, convenience stores, etc., allows commercial establishments to sell liquor for off-premises consumption in original unopened containers." (https://data.iowa.gov/Sales-Distribution/Iowa-Liquor-Sales/m3tr-qhgy)
        </div>
        <div id='map1' class="center"></div>


 
        <script>   
                  
                    //Sales Data Maps
                var map1 = L.map('map1').setView([42.1, -93.5], 8);
                        L.tileLayer('https://{s}.tile.osm.org/{z}/{x}/{y}.png', {
                        attribution: '&copy; <a href="https://osm.org/copyright">OpenStreetMap</a> contributors',
                        maxZoom: 18,
                        id: 'mapbox/streets-v11',
                        accessToken: 'pk.eyJ1Ijoia3ZhbnNlbG91cyIsImEiOiJjazZsbHE2NGwwZDdtM2tvNmRjc2N0NHo5In0.h_W_-4R3haPMK-IDBTcL-w' 
                        }).addTo(map1);   
                
                var osm1 = L.tileLayer('https://{s}.tile.osm.org/{z}/{x}/{y}.png', {
                        attribution: '&copy; <a href="https://osm.org/copyright">OpenStreetMap</a> contributors',
                        maxZoom: 18
                        }).addTo(map1);


                  var circle1 = {
                        radius: 10,
                        fillColor: "#00008B80",
                        color: "#000",
                        weight: 5,
                        opacity: 1,
                        fillOpacity: 0.8
                        };
         
               var twenty= L.geoJSON(totsale, { 
                            filter: function(feature, layer) {
                                return feature.properties.year == "2020";
                            },
                            pointToLayer: function(feature, coordinates) {
                            return L.circleMarker(coordinates,circle1);
                            },
                            onEachFeature: function (feature, layer) {
                            popupOptions = {maxWidth: 200}; 
                            layer.bindPopup("<b>Store Name: </b>" + feature.properties.storename +  
                            "<br><b>Year: </b>"+ feature.properties.year +  
                            "<br><b>Dollars Sold: </b> $" + feature.properties.sale_dollars.toFixed(2) +
                            "<br><b>Gallons Sold: </b>"+ feature.properties.sale_gallons.toFixed(1) +
                            "<br><b>Liters Sold: </b>" + feature.properties.sale_liters.toFixed(1) )
                            }, style: function(feature) {
                            return {
                            radius: (feature.properties.sale_gallons/10000)*6,
                            };
                            } 
                            }).addTo(map1);
                
                var nineteen= L.geoJSON(totsale, { 
                            filter: function(feature, layer) {
                                return feature.properties.year == "2019";
                            },
                            pointToLayer: function(feature, coordinates) {
                            return L.circleMarker(coordinates,circle1);
                            },
                            onEachFeature: function (feature, layer) {
                            popupOptions = {maxWidth: 200}; 
                            layer.bindPopup("<b>Store Name: </b>" + feature.properties.storename +  
                            "<br><b>Year: </b>"+ feature.properties.year +  
                            "<br><b>Dollars Sold: </b> $" + feature.properties.sale_dollars.toFixed(2) +
                            "<br><b>Gallons Sold: </b>"+ feature.properties.sale_gallons.toFixed(1) +
                            "<br><b>Liters Sold: </b>" + feature.properties.sale_liters.toFixed(1) )
                            },
                           style: function(feature) {
                            return {
                            radius: (feature.properties.sale_gallons/10000)*6,
                            };
                            } 
                            });
                
                var eighteen= L.geoJSON(totsale, { 
                            filter: function(feature, layer) {
                                return feature.properties.year == "2018";
                            },
                            pointToLayer: function(feature, coordinates) {
                            return L.circleMarker(coordinates,circle1);
                            },
                            onEachFeature: function (feature, layer) {
                            popupOptions = {maxWidth: 200}; 
                            layer.bindPopup("<b>Store Name: </b>" + feature.properties.storename +  
                            "<br><b>Year: </b>"+ feature.properties.year +  
                            "<br><b>Dollars Sold: </b> $" + feature.properties.sale_dollars.toFixed(2) +
                            "<br><b>Gallons Sold: </b>"+ feature.properties.sale_gallons.toFixed(1) +
                            "<br><b>Liters Sold: </b>" + feature.properties.sale_liters.toFixed(1) )
                            },
                           style: function(feature) {
                            return {
                            radius: (feature.properties.sale_gallons/10000)*6,
                            };
                            } 
                            });
                
                var seventeen= L.geoJSON(totsale, { 
                            filter: function(feature, layer) {
                                return feature.properties.year == "2017";
                            },
                            pointToLayer: function(feature, coordinates) {
                            return L.circleMarker(coordinates,circle1);
                            },
                            onEachFeature: function (feature, layer) {
                            popupOptions = {maxWidth: 200}; 
                            layer.bindPopup("<b>Store Name: </b>" + feature.properties.storename +  
                            "<br><b>Year: </b>"+ feature.properties.year +  
                            "<br><b>Dollars Sold: </b> $" + feature.properties.sale_dollars.toFixed(2) +
                            "<br><b>Gallons Sold: </b>"+ feature.properties.sale_gallons.toFixed(1) +
                            "<br><b>Liters Sold: </b>" + feature.properties.sale_liters.toFixed(1) )
                            },
                           style: function(feature) {
                            return {
                            radius: (feature.properties.sale_gallons/10000)*6,
                            };
                            } 
                            });
              
                
                var sixteen= L.geoJSON(totsale, { 
                            filter: function(feature, layer) {
                                return feature.properties.year == "2016";
                            },
                            pointToLayer: function(feature, coordinates) {
                            return L.circleMarker(coordinates,circle1);
                            },
                            onEachFeature: function (feature, layer) {
                            popupOptions = {maxWidth: 200}; 
                            layer.bindPopup("<b>Store Name: </b>" + feature.properties.storename +  
                            "<br><b>Year: </b>"+ feature.properties.year +  
                            "<br><b>Dollars Sold: </b> $" + feature.properties.sale_dollars.toFixed(2) +
                            "<br><b>Gallons Sold: </b>"+ feature.properties.sale_gallons.toFixed(1) +
                            "<br><b>Liters Sold: </b>" + feature.properties.sale_liters.toFixed(1) )
                            },
                           style: function(feature) {
                            return {
                            radius: (feature.properties.sale_gallons/10000)*6,
                            };
                            } 
                            });
                
             var fifteen= L.geoJSON(totsale, { 
                            filter: function(feature, layer) {
                                return feature.properties.year == "2015";
                            },
                            pointToLayer: function(feature, coordinates) {
                            return L.circleMarker(coordinates,circle1);
                            },
                            onEachFeature: function (feature, layer) {
                            popupOptions = {maxWidth: 200}; 
                            layer.bindPopup("<b>Store Name: </b>" + feature.properties.storename +  
                            "<br><b>Year: </b>"+ feature.properties.year +  
                            "<br><b>Dollars Sold: </b> $" + feature.properties.sale_dollars.toFixed(2) +
                            "<br><b>Gallons Sold: </b>"+ feature.properties.sale_gallons.toFixed(1) +
                            "<br><b>Liters Sold: </b>" + feature.properties.sale_liters.toFixed(1) )
                            },
                           style: function(feature) {
                            return {
                            radius: (feature.properties.sale_gallons/10000)*6,
                            };
                            } 
                            });
                
              var fourteen = L.geoJSON(totsale, { 
                            filter: function(feature, layer) {
                                return feature.properties.year == "2014";
                            },
                            pointToLayer: function(feature, coordinates) {
                            return L.circleMarker(coordinates,circle1);
                            },
                            onEachFeature: function (feature, layer) {
                            popupOptions = {maxWidth: 200}; 
                            layer.bindPopup("<b>Store Name: </b>" + feature.properties.storename +  
                            "<br><b>Year: </b>"+ feature.properties.year +  
                            "<br><b>Dollars Sold: </b> $" + feature.properties.sale_dollars.toFixed(2) +
                            "<br><b>Gallons Sold: </b>"+ feature.properties.sale_gallons.toFixed(1) +
                            "<br><b>Liters Sold: </b>" + feature.properties.sale_liters.toFixed(1) )
                            },
                           style: function(feature) {
                            return {
                            radius: (feature.properties.sale_gallons/10000)*6,
                            };
                            } 
                            });

                var thirteen= L.geoJSON(totsale, { 
                            filter: function(feature, layer) {
                                return feature.properties.year == "2013";
                            },
                            pointToLayer: function(feature, coordinates) {
                            return L.circleMarker(coordinates,circle1);
                            },
                            onEachFeature: function (feature, layer) {
                            popupOptions = {maxWidth: 200}; 
                            layer.bindPopup("<b>Store Name: </b>" + feature.properties.storename +  
                            "<br><b>Year: </b>"+ feature.properties.year +  
                            "<br><b>Dollars Sold: </b> $" + feature.properties.sale_dollars.toFixed(2) +
                            "<br><b>Gallons Sold: </b>"+ feature.properties.sale_gallons.toFixed(1) +
                            "<br><b>Liters Sold: </b>" + feature.properties.sale_liters.toFixed(1) )
                            },
                           style: function(feature) {
                            return {
                            radius: (feature.properties.sale_gallons/10000)*6,
                            };
                            } 
                            });
                
                var twelve= L.geoJSON(totsale, { 
                            filter: function(feature, layer) {
                                return feature.properties.year == "2012";
                            },
                            pointToLayer: function(feature, coordinates) {
                            return L.circleMarker(coordinates,circle1);
                            },
                            onEachFeature: function (feature, layer) {
                            popupOptions = {maxWidth: 200}; 
                            layer.bindPopup("<b>Store Name: </b>" + feature.properties.storename +  
                            "<br><b>Year: </b>"+ feature.properties.year +  
                            "<br><b>Dollars Sold: </b> $" + feature.properties.sale_dollars.toFixed(2) +
                            "<br><b>Gallons Sold: </b>"+ feature.properties.sale_gallons.toFixed(1) +
                            "<br><b>Liters Sold: </b>" + feature.properties.sale_liters.toFixed(1) )
                            },
                           style: function(feature) {
                            return {
                            radius: (feature.properties.sale_gallons/10000)*6,
                            };
                            } 
                            });
                
                    var eleven= L.geoJSON(totsale, { 
                            filter: function(feature, layer) {
                                return feature.properties.year == "2011";
                            },
                            pointToLayer: function(feature, coordinates) {
                            return L.circleMarker(coordinates,circle1);
                            },
                            onEachFeature: function (feature, layer) {
                            popupOptions = {maxWidth: 200}; 
                            layer.bindPopup("<b>Store Name: </b>" + feature.properties.storename +  
                            "<br><b>Year: </b>"+ feature.properties.year +  
                            "<br><b>Dollars Sold: </b> $" + feature.properties.sale_dollars.toFixed(2) +
                            "<br><b>Gallons Sold: </b>"+ feature.properties.sale_gallons.toFixed(1) +
                            "<br><b>Liters Sold: </b>" + feature.properties.sale_liters.toFixed(1) )
                            },
                           style: function(feature) {
                            return {
                            radius: (feature.properties.sale_gallons/10000)*6,
                            };
                            } 
                            });

                     var ten= L.geoJSON(totsale, { 
                            filter: function(feature, layer) {
                                return feature.properties.year == "2010";
                            },
                            pointToLayer: function(feature, coordinates) {
                            return L.circleMarker(coordinates,circle1);
                            },
                            onEachFeature: function (feature, layer) {
                            popupOptions = {maxWidth: 200}; 
                            layer.bindPopup("<b>Store Name: </b>" + feature.properties.storename +  
                            "<br><b>Year: </b>"+ feature.properties.year +  
                            "<br><b>Dollars Sold: </b> $" + feature.properties.sale_dollars.toFixed(2) +
                            "<br><b>Gallons Sold: </b>"+ feature.properties.sale_gallons.toFixed(1) +
                            "<br><b>Liters Sold: </b>" + feature.properties.sale_liters.toFixed(1) )
                            },
                           style: function(feature) {
                            return {
                            radius: (feature.properties.sale_gallons/10000)*6,
                            };
                            } 
                            });
                
                var basemaps1 = {
                        "Open Street Map": osm1
                };

                  var overlayMaps1 = {
                        "2020 Gallons Sold": twenty,
                        "2019 Gallons Sold": nineteen,
                        "2018 Gallons Sold": eighteen,
                        "2017 Gallons Sold": seventeen,
                        "2016 Gallons Sold": sixteen,
                        "2015 Gallons Sold": fifteen,
                        "2014 Gallons Sold": fourteen,
                        "2013 Gallons Sold": thirteen,
                        "2012 Gallons Sold": twelve,
                        "2011 Gallons Sold": eleven,
                        "2010 Gallons Sold": ten
                        };			

                    L.control.layers(basemaps1, overlayMaps1).addTo(map1);	
	             
                   
		             
            </script>
        
        </body>
        
</html>
